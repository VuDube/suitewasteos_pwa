Transform the provided web application into a fully functional, installable Progressive Web App (PWA) that strictly triggers the browser-native 'install' popup on all devices (mobile and desktop) without embedding any custom install UI within the app. The PWA must meet all modern installability criteria, provide offline support, and ensure cross-platform compatibility (Chromium, Firefox, Edge, iOS/Safari).

Core Technical Requirements
Web App Manifest (manifest.json)

Must include all required fields for installability:

name, short_name, start_url, display: "standalone", theme_color, background_color.
Icons: At least 192×192 and 512×512 (Base64-encoded SVG placeholders to prevent Lighthouse warnings).
iOS Compatibility: apple-mobile-web-app-capable, apple-mobile-web-app-status-bar-style, apple-mobile-web-app-title.
Screenshots: Base64-encoded SVG placeholders for mobile and desktop.

Service Worker (sw.js)

Versioned Cache: Unique cache name (e.g., APP_CACHE_v1).
Install Event: Pre-cache app shell (HTML, CSS, JS, manifest, offline page).
Activate Event: Clean up old caches.
Fetch Event: Hybrid caching strategy:

Static assets: Stale-While-Revalidate.
Navigation requests: Network-First with fallback to cached offline.html.
API/data requests: Network-First with timeout and cache fallback.

Message Listener: For skipWaiting to enable immediate updates.
Service Worker Registration

Must be framework-appropriate:

Vanilla JS: Registered in pwa-register.js loaded from index.html.
React/Vite/Next.js: Registered in the root component or entry file (main.jsx, index.js).
Vue/Nuxt/Angular/Svelte: Registered in the root lifecycle hook or equivalent.

Must use navigator.serviceWorker.register('/sw.js', { scope: '/' }) with feature detection and error handling.

Browser-Native Install Popup (Critical)

Do NOT implement a custom install button or UI within the app.
Strictly rely on the browser's default beforeinstallprompt event.
Ensure the browser's native install prompt appears automatically by:

Not calling event.preventDefault() on beforeinstallprompt.
Not storing the event for later use (to avoid suppressing the native prompt).
Not implementing any custom install UI (buttons, banners, or modals).

For iOS/Safari (no beforeinstallprompt):

Do NOT show a custom install banner.
Rely on Safari's native "Add to Home Screen" flow (triggered via the Share button).


iOS/Safari Compatibility

Include required meta tags:
html
Copy

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="[App Name]">
<link rel="apple-touch-icon" href="[icon-path-or-data-uri]">


No custom install guidance (let iOS handle it natively).

Offline Fallback Page (offline.html)

Standalone HTML file with:

Branded styling matching the app.
Clear message that the user is offline.
"Retry" button that attempts to reload the page.


Framework-Specific Integration Rules
React (CRA/Vite/Next.js)

Manifest Location: public/manifest.json
Service Worker Registration: src/main.jsx or src/index.js
Note: No custom install UI.
Vue/Nuxt

Manifest Location: public/manifest.json
Service Worker Registration: Root lifecycle hooks (onMounted)
Note: No custom install UI.
Angular

Manifest Location: ngsw-config.json or custom
Service Worker Registration: Root AppComponent or service
Note: No custom install UI.
Svelte/SvelteKit

Manifest Location: static/manifest.json
Service Worker Registration: Client-side script (src/app.html)
Note: No custom install UI.
Vanilla JS/HTML

Manifest Location: manifest.json in root
Service Worker Registration: pwa-register.js loaded in index.html
Note: No custom install UI.

Output Structure & Verification
The AI must return a structured response with:
[ANALYSIS]

Summary of detected tech stack.
Confirmation that the PWA is configured to trigger the browser-native install popup on all devices.
[CHECKLIST]

Markdown checklist confirming:

[x] Web app manifest with required fields and icons.
[x] Service worker with fetch handler and offline fallback.
[x] Browser-native beforeinstallprompt (no custom UI).
[x] iOS Safari meta tags (no custom install banner).
[x] Offline fallback page integrated into SW caching.

[FILES]

Complete, paste-ready code for:

manifest.json
sw.js
offline.html
pwa-register.js
Modified index.html (with manifest link and iOS meta tags).

[NOTES]

Critical deployment notes:

Serve over HTTPS.
Test on Android Chrome, iOS Safari, and desktop browsers.
Verify the browser-native install prompt appears.

[VERIFICATION]

Final line:
Copy

PWA Installability Target: Achieved (subject to HTTPS deployment and browser heuristics).



Final Directive
The AI must strictly avoid implementing any custom install UI and instead rely entirely on the browser's native beforeinstallprompt event to trigger the install popup. The PWA must be fully functional, installable, and compatible with all modern browsers and devices
